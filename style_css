/*
================================================================================
AnKing Prettify - Multi-Theme Framework (Full Version with Custom Background)
================================================================================
*/


/* --- General Reset & Layout Fix --- */
html {
  height: 100%;
  margin: 0;
  padding: 0;
  overflow: hidden;
  box-sizing: border-box;
}
body {
  min-height: 100%;
  margin: 0;
  padding: 0;
  overflow-x: hidden;
  overflow-y: auto;
  box-sizing: border-box;
  display: flex;
  flex-direction: column;
}
*, *::before, *::after {
  box-sizing: inherit;
}

/*
================================================================================
I.   COLOR PALETTE
================================================================================
*/
:root {
  /* --- PALETTE: OCEAN (Teal/Deep Blue) --- */
  --p-hue-bg: 180; --p-hue-accent: 200;
  --p-bg-s: 40%; --p-bg-l: 92%; --p-bg-l-dark: 11%;
  --p-accent-s: 55%; --p-accent-l: 50%; --p-accent-l-dark: 65%;
  --p-text-s: 25%; --p-text-l: 22%; --p-text-l-dark: 88%;
  --p-bold-fg: #FF7F50; --p-italic-fg: #6A5ACD; --p-underline-fg: #20B2AA; --p-bold-italic-fg: #CD5C5C;
  --p-bold-fg-dark: #FFA07A; --p-italic-fg-dark: #DA70D6; /* MODIFIED: Brighter purple for readability */ --p-underline-fg-dark: #48D1CC; --p-bold-italic-fg-dark: #F08080;
}
/*
================================================================================
II.  MASTER VARIABLE ASSIGNMENT & CORE STYLES
================================================================================
*/
:root {
  /* Base Layout & Font */
  --card-max-width: 100em; --font-family: "Rubik", "Inter", -apple-system, system-ui, "SF Pro", sans-serif;
  --font-family-serif: "Merriweather", "Georgia", serif; --font-family-mono: "Fira Code", "Courier New", monospace;
  --base-border-radius: 1.25em;

  /* Light Mode Variables */
  --c-text-primary-light: hsl(var(--p-hue-bg), var(--p-text-s), var(--p-text-l)); --c-text-secondary-light: hsl(var(--p-hue-bg), calc(var(--p-text-s) - 5%), calc(var(--p-text-l) + 20%));
  --c-accent-1-light: hsl(var(--p-hue-accent), var(--p-accent-s), var(--p-accent-l)); --c-accent-2-light: hsl(var(--p-hue-accent), var(--p-accent-s), calc(var(--p-accent-l) - 10%));
  --c-divider-light: hsl(var(--p-hue-bg), calc(var(--p-bg-s) - 10%), calc(var(--p-bg-l) - 10%));

  /* Dark Mode Variables -- MODIFIED FOR READABILITY */
  --c-text-primary-dark: hsl(var(--p-hue-bg), 15%, 95%); /* Brighter primary text */
  --c-text-secondary-dark: hsl(var(--p-hue-bg), 10%, 80%); /* Brighter secondary text */
  --c-accent-1-dark: hsl(var(--p-hue-accent), var(--p-accent-s), var(--p-accent-l-dark)); --c-accent-2-dark: hsl(var(--p-hue-accent), var(--p-accent-s), calc(var(--p-accent-l-dark) - 10%));
  --c-divider-dark: hsl(var(--p-hue-bg), var(--p-bg-s), calc(var(--p-bg-l-dark) + 15%));

  /* Abstracted Variables for CSS rules to use */
  --text-primary: var(--c-text-primary-light); --text-secondary: var(--c-text-secondary-light);
  --accent-1: var(--c-accent-1-light); --accent-2: var(--c-accent-2-light); --divider: var(--c-divider-light);
  --bold-fg: var(--p-bold-fg); --italic-fg: var(--p-italic-fg); --underline-fg: var(--p-underline-fg); --bold-italic-fg: var(--p-bold-italic-fg);
}

/* === MODIFICATION: Background Image & Full Screen Fix === */
html, body {
  height: 100%;
  width: 100%;
  margin: 0;
  padding: 0;
}

body {
  /* ===  background-image: url('lighthouse_background.jpg'); ===*/
	background-image: url('starsky.jpeg');
  background-attachment: fixed;
  background-size: cover;
  background-position: center center;
  background-repeat: no-repeat;
}

body.night_mode {
  /* This section applies the dark mode text colors */
  --text-primary: var(--c-text-primary-dark);
  --text-secondary: var(--c-text-secondary-dark);
  --accent-1: var(--c-accent-1-dark);
  --accent-2: var(--c-accent-2-dark);
  --divider: var(--c-divider-dark);
  --bold-fg: var(--p-bold-fg-dark);
  --italic-fg: var(--p-italic-fg-dark);
  --underline-fg: var(--p-underline-fg-dark);
  --bold-italic-fg: var(--p-bold-italic-fg-dark);
}
/* === END MODIFICATION === */


.card {
  color: var(--text-primary);
  font-family: var(--font-family);
  width: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  /* MODIFIED: Add padding to respect iPhone safe areas (notch/home bar) */
  padding-top: calc(1em + env(safe-area-inset-top, 0px));
  padding-bottom: calc(1em + env(safe-area-inset-bottom, 0px));
  padding-left: calc(1em + env(safe-area-inset-left, 0px));
  padding-right: calc(1em + env(safe-area-inset-right, 0px));
}
.prettify-flashcard {
  font-size: 20px; line-height: 1.8; padding: 2.25em; margin: 1em auto;
  width: 100%; max-width: var(--card-max-width); text-align: center; word-wrap: break-word; color: var(--text-primary);
  transition: all 0.3s cubic-bezier(0.25, 0.1, 0.25, 1);
  will-change: transform, box-shadow, background-color, border, backdrop-filter;
  transform: translateZ(0);
  overflow: visible;
  position: relative; /* Needed for pseudo-elements */
}

.prettify-flashcard ::selection { background-color: var(--accent-2); color: white; }
.prettify-flashcard b, .prettify-flashcard strong { color: var(--bold-fg); }
.prettify-flashcard i, .prettify-flashcard em { color: var(--italic-fg); font-style: italic; }
.prettify-flashcard u { text-decoration-color: var(--underline-fg); color: var(--underline-fg); }
.prettify-flashcard b > i, .prettify-flashcard i > b { color: var(--bold-italic-fg); }
.prettify-flashcard .cloze { font-weight: bold; color: var(--accent-1); }
a { color: var(--accent-1); text-decoration: none; }
a:hover { color: var(--accent-2); text-decoration: underline;}
.prettify-deck { color: var(--text-secondary); font-size: 0.8em; }
.prettify-divider { border: none; border-bottom: 2px dashed var(--divider); margin: 1.5em; }

/*
================================================================================
III.  THEME DEFINITIONS & THEME-AWARE BUTTONS
================================================================================
*/

/* --- THEME: DEFAULT & FLUENT --- */
.theme-default, .prettify-flashcard:not([class*="theme-"]), .theme-fluent {
  background-color: hsla(var(--p-hue-bg), var(--p-bg-s), calc(var(--p-bg-l) + 3%), 0.8);
  backdrop-filter: blur(10px) saturate(120%); -webkit-backdrop-filter: blur(10px) saturate(120%);
  border-radius: var(--base-border-radius); border: 1px solid var(--divider);
}
body.night_mode .theme-default, body.night_mode .prettify-flashcard:not([class*="theme-"]), body.night_mode .theme-fluent {
  background-color: hsla(var(--p-hue-bg), var(--p-bg-s), calc(var(--p-bg-l-dark) + 5%), 0.75);
}
.theme-default .cloze, .prettify-flashcard:not([class*="theme-"]) .cloze, .theme-fluent .cloze {
  background-color: rgba(from var(--accent-1) r g b / 0.1); padding: 0.2em 0.6em; border-radius: 0.5em;
}

/* --- THEME: GLASSMORPHISM & GLASS-DEEP --- */
.theme-glassmorphism, .theme-glass-deep {
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(35px) saturate(160%); -webkit-backdrop-filter: blur(35px) saturate(160%);
  border-radius: var(--base-border-radius); border: 1px solid rgba(255, 255, 255, 0.2);
  box-shadow: inset 0 1.5px 1px rgba(255, 255, 255, 0.3), 0 10px 30px rgba(0,0,0,0.15);
}
body.night_mode .theme-glassmorphism, body.night_mode .theme-glass-deep {
  background: rgba(20, 20, 20, 0.2); border-color: rgba(255, 255, 255, 0.1);
  box-shadow: inset 0 1.5px 1px rgba(255, 255, 255, 0.1), 0 10px 30px rgba(0,0,0,0.3);
}

/* --- THEME: NEOBRUTALISM --- */
.theme-neobrutalism {
  background-color: hsl(var(--p-hue-bg), var(--p-bg-s), calc(var(--p-bg-l) + 2%));
  border-radius: 0; border: 3px solid var(--text-primary);
  box-shadow: 8px 8px 0px var(--text-primary);
}
body.night_mode .theme-neobrutalism { background-color: hsl(var(--p-hue-bg), var(--p-bg-s), var(--p-bg-l-dark)); }

/* --- THEME: CLAYMORPHISM --- */
.theme-claymorphism {
  background: hsl(var(--p-hue-bg), var(--p-bg-s), var(--p-bg-l));
  border-radius: 50px 20px 40px 15px / 30px 45px 25px 55px;
  box-shadow: inset -6px -6px 12px rgba(255,255,255,0.5), inset 6px 6px 16px rgba(0,0,0,0.1), 10px 10px 20px rgba(0,0,0,0.1);
}
body.night_mode .theme-claymorphism {
  background: hsl(var(--p-hue-bg), var(--p-bg-s), var(--p-bg-l-dark));
  box-shadow: inset -6px -6px 12px rgba(255,255,255,0.05), inset 6px 6px 16px rgba(0,0,0,0.3), 10px 10px 20px rgba(0,0,0,0.3);
}

/* --- THEME: MINIMALIST --- */
.theme-minimalist {
  background-color: hsl(var(--p-hue-bg), var(--p-bg-s), calc(var(--p-bg-l) + 2%));
  border: 2px solid var(--text-primary); border-radius: 4px; font-family: var(--font-family-mono);
}
body.night_mode .theme-minimalist { background-color: hsl(var(--p-hue-bg), var(--p-bg-s), var(--p-bg-l-dark)); }

/* --- THEME: ACRYLIC --- */
.theme-acrylic {
  --acrylic-noise: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiDAAAAUVBMVEWFhYWDg4N3d3dtbW17e3t1dXVrbW1sZWVjaGhxeXlgYGBkcXFiYmJhaGhhYWF4d3d0dHRsbGxlYmPEg4O0o6Ovq6vFh4eDg4N6enpsbW1qaGptZ2drB7rdAAAANXRSTlMACQkLCwsKCQkLCwsKCQkLCwsKCQkLCwsKCQkLCwsKCQkLCwsKCQkLCwsKCQkLCwsKCQkLCwsKCQkLCwsK+wN8VwAAATNJREFUSMe1l9tygyAQRRUR8dG1vX3/t3UQqhGUEOlmM9k3b5bDeStVlpZWVpZNV0ySYl3EZeL2Ecnz9RlYllrv25p7zW2v3kAa+A1U7fpvA427tB+o2/gYkL8nL+A2I38nL+BCR/5+voBSr/x8/wBpH/l5QQGUn/l5/wAClH/l/SoBaXH+k/wD5Dz9k/wDBCj/qf8DdLr8p/4PCMz/p/8HhHX9K/8HjOr6V/8PqN35T/8PIMH5T/8PyNX5T/8P6Br8p/8PlBz8p/8PlBz4p/8PCAb+U/8PCAb+k/8PcBv4T/8PuBz4T/8PqNv4T/8P6A/8p/8P6A/8J/8PcA/8J/8PqA/8J/8PqA/8p/8PuA/4p/8PCAb+U/8PCAb+k/8PuBv4T/8PCAb+k/8P6Br8p/8PIMH5T/8PqN35T/8PjOr6V/8PCOv6V/8PCMz/p/8HdLr8p/wPqA/8p/wDBCj/qf8D5Dz9k/wD5Hj+k/wDBlD/l/SoBWFx/pP8A6Vf+fn+ANKv/Hy/AClX/n5+gNGv/Hy/AAlb+Tl/AxI28nL+A4Q18nL+AyQ28nL+AxSN/JO3/gGkG/k7f+AGQN/JOv/gGk2/knb/gBVLfxT3/gBURb+KWv/gGru/FN/+AFUt/JO3/gAVJf/JO/+AFUl/JOv/gBkv/FPf+AEyA/8nb/gBkv/FP/gAmA/8nb/gAkv/FP/gAmQ3/knb/gCkv/J2/8Akg3/knb/gCUhT/JO/+AEwB/8nb/gAwB/8k7f+AEwB/8nb/gAwB/8k7f+AEwB/8nb/gAwB/8k7f+AEwB/8nb/gAwB/8k7f+AEwB/8nb/gAwB/8k7f+AFQl/8nb/gCpBv+Tt/4AlBr+Tt/4AFQG/knb/gBUpP/J2/8AFLb+Sd/+ACCGv5J2/8AQEH/knb/wBCQH/knb/wBCQH/knb/wBCQH/knb/wBCQH/knb/wBCQH/knb/wBCQH/knb/wBAwH/knb/wBAwH/knb/wBAwH/knb/wBCQH/knb/wBAwH/knb/wBCQH/knb/wBAQH/knb/wBAQX/knb/wBAQX/knb/wBAQX/knb/wBAQX/knb/wBAQX/knb/wBAQX/knb/wBAQX/knb/wBAQX/knb/wBAQX/knb/wBAQX/knb/wBAQX/knb/wBAQX/knb/wBCQX/knb/wBCQX/knb/wBCQX/knb/wBCQX/knb/wBCQX/knb/wBCQX/knb/wBCQX/knb/wBCQX/knb/wBCQX/knb/wBCQX/knb/wBCQX/knb/wBCQX/knb/wBCQX/knb/wBCQX/knb/wBCQX/knb/wBCQX/knb/wBCQX/knb/wBCQX/knb/wBCTH8k7f+AEyW38k7f+AEyW38k7f+AEyW38k7f+AEyW38k7f+AEyW38k7f+AEyW38k7f+AEyW38k7f+AEyW38k7f+AEyW38k7f+AEyW38k7f+AEyW38k7f+AEyW38k7f+AEyW38k7f+AEyW38k7f+AEyW38k7f+AEyW38k7f+AEyW38k7f+AEyW38k7f+AEyW38k7f+AEyW38k7f+AEyW38k7f+AEyW38k7f+AEyW38k7f+AEyW38k7f+AEyW38k7f+AEyW38k7f+AEyW38k7f+AEyW38k7f+AEyW38k7f+AEyW38k7f+AEyW38k7f+AEyW38k7f+AEyW38k7f+AEyW38k7f+AEyW38k7f+AEyW38k7f+AEyW38k7f+AEyW38k7f+AEyW38k7f+AEyW38k7f+AEyW38k7f+AEyW38k7f+AEyW38k7f+AEyW38k7f+AEyW38k7f+AEyW38k7f+AEyW38k7f+AEyW38k7f+AEyW38k7e8/p8ADAH8D6l2L8YAAAAASUVORK5CYII=);
  background-color: hsla(var(--p-hue-bg), var(--p-bg-s), var(--p-bg-l), 0.7);
  background-image: var(--acrylic-noise); backdrop-filter: blur(50px) saturate(120%); -webkit-backdrop-filter: blur(50px) saturate(120%);
  border-radius: 0.8em; border: 1px solid hsla(var(--p-hue-bg), var(--p-bg-s), var(--p-bg-l), 0.1); box-shadow: 0 4px 15px rgba(0,0,0,0.08);
}
body.night_mode .theme-acrylic { background-color: hsla(var(--p-hue-bg), var(--p-bg-s), var(--p-bg-l-dark), 0.65); border-color: hsla(var(--p-hue-bg), var(--p-bg-s), var(--p-bg-l-dark), 0.2); }

/* --- THEME: GELATIN, QUARTZ, OBSIDIAN, HOLOGRAPHIC --- */
.theme-gelatin { background: rgba(from var(--accent-1) r g b / 0.15); backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px); border-radius: 3em; border: 1px solid rgba(from var(--accent-1) r g b / 0.2); }
.theme-quartz { background: hsla(var(--p-hue-bg), 20%, 98%, 0.5); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); border-radius: 0.5em; border: 1px solid hsla(var(--p-hue-bg), 20%, 98%, 0.7); box-shadow: inset 0 0 20px hsla(var(--p-hue-bg), 20%, 98%, 0.3); }
body.night_mode .theme-quartz { background: hsla(var(--p-hue-bg), 10%, 10%, 0.4); border-color: hsla(var(--p-hue-bg), 10%, 10%, 0.5); box-shadow: inset 0 0 20px hsla(var(--p-hue-bg), 10%, 10%, 0.2); }
.theme-obsidian { background: linear-gradient(145deg, hsl(var(--p-hue-bg), 10%, 25%), hsl(var(--p-hue-bg), 10%, 15%)); border-radius: 0.75em; border: 1px solid hsl(var(--p-hue-bg), 10%, 35%); box-shadow: inset 0 1px 1px hsl(var(--p-hue-bg), 10%, 30%), 0 5px 15px rgba(0,0,0,0.3); position: relative; overflow: hidden; }
.theme-obsidian::before { content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: radial-gradient(circle at 70% 20%, hsla(var(--p-hue-accent), 50%, 60%, 0.3), transparent 40%); opacity: 0.5; mix-blend-mode: soft-light; pointer-events: none; }
body.night_mode .theme-obsidian { background: linear-gradient(145deg, hsl(var(--p-hue-bg), 10%, 18%), hsl(var(--p-hue-bg), 10%, 8%)); border-color: hsl(var(--p-hue-bg), 10%, 25%); }
.theme-holographic { background: rgba(255,255,255,0.1); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); border: 1px solid rgba(255,255,255,0.2); border-radius: var(--base-border-radius); position: relative; overflow: hidden; }
.theme-holographic .holo-sheen { content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: radial-gradient(circle at var(--x, 50%) var(--y, 50%), hsla(0, 100%, 100%, 0.3), transparent 40%); background-blend-mode: screen; transition: transform 0.1s ease-out; pointer-events: none; }

/* === NEW THEME: LIQUID GLASS (SMOOTHER & MORE TRANSPARENT) === */
.theme-liquid-glass {
  background-color: rgba(255, 255, 255, 0.15); /* More transparent */
  backdrop-filter: blur(50px) saturate(180%);
  -webkit-backdrop-filter: blur(50px) saturate(180%);
  border-radius: calc(var(--base-border-radius) + 10px);
  border: 1px solid rgba(255, 255, 255, 0.4);
  box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.2);
  overflow: hidden; /* Important to contain pseudo-elements */
}
body.night_mode .theme-liquid-glass {
  background-color: rgba(30, 30, 30, 0.2); /* More transparent */
  border-color: rgba(255, 255, 255, 0.15);
  box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3);
}
/* Specular Highlight Layer */
.theme-liquid-glass::after {
  content: '';
  position: absolute;
  top: -50%; left: -50%;
  width: 200%; height: 200%;
  background: radial-gradient(circle at 70% 30%, rgba(255, 255, 255, 0.5), transparent 30%);
  z-index: -1;
  opacity: 0.5;
}
body.night_mode .theme-liquid-glass::after {
  background: radial-gradient(circle at 70% 30%, rgba(255, 255, 255, 0.2), transparent 35%);
}
/* === END NEW THEME === */


/*
================================================================================
IV.   THEME-AWARE TABLE STYLES
================================================================================
*/

/* --- BASE TABLE STYLES --- */
.prettify-flashcard table {
  width: auto;
  max-width: 95%;
  margin: 1.5em auto;
  border-collapse: separate;
  border-spacing: 0;
  border: 1px solid var(--divider);
  border-radius: 0.6em;
  font-size: 0.9em;
  box-shadow: 0 2px 5px hsla(var(--p-hue-bg), calc(var(--p-text-s) + 10%), calc(var(--p-text-l) - 10%), 0.07);
  overflow: hidden;
  color: var(--text-primary);
}

.prettify-flashcard th,
.prettify-flashcard td {
  padding: 0.75em 1em;
  text-align: left;
  border-bottom: 1px solid var(--divider);
}

.prettify-flashcard td:not(:last-child),
.prettify-flashcard th:not(:last-child) {
  border-right: 1px solid var(--divider);
}

.prettify-flashcard th {
  background-color: rgba(from var(--accent-1) r g b / 0.1);
  color: var(--accent-1);
  font-weight: bold;
  border-bottom-width: 2px;
  border-bottom-color: var(--accent-1);
}

.prettify-flashcard tr:last-child td {
  border-bottom: none;
}

.prettify-flashcard:not(body.night_mode *) tbody tr:nth-child(even) td {
  background-color: hsla(var(--p-hue-bg), var(--p-bg-s), calc(var(--p-bg-l) - 3%), 0.3);
}

body.night_mode .prettify-flashcard tbody tr:nth-child(even) td {
  background-color: hsla(var(--p-hue-bg), var(--p-bg-s), calc(var(--p-bg-l-dark) + 3%), 0.3);
}

.mobile .prettify-flashcard table {
  display: block; width: 100%; max-width: 100%; overflow-x: auto; white-space: nowrap; font-size: 0.8em; margin: 1em 0; border-radius: 0.5em;
}
.mobile .prettify-flashcard th,
.mobile .prettify-flashcard td {
  white-space: normal;
  padding: 0.5em 0.75em;
}

/* --- THEME-SPECIFIC TABLE OVERRIDES --- */

.theme-default table,
.prettify-flashcard:not([class*="theme-"]) table,
.theme-fluent table {
  box-shadow: 0 3px 8px hsla(var(--p-hue-bg), calc(var(--p-text-s) + 10%), calc(var(--p-text-l) - 10%), 0.1);
}
.theme-default th,
.prettify-flashcard:not([class*="theme-"]) th,
.theme-fluent th {
  background-color: hsla(var(--p-hue-accent), var(--p-accent-s), var(--p-accent-l), 0.15);
}

.theme-glassmorphism table,
.theme-glass-deep table {
  background-color: rgba(255, 255, 255, 0.03);
  border: 1px solid rgba(255, 255, 255, 0.1);
  box-shadow: none;
  border-radius: 0.5em;
}
body.night_mode .theme-glassmorphism table,
body.night_mode .theme-glass-deep table {
  background-color: rgba(50, 50, 50, 0.05);
  border-color: rgba(255, 255, 255, 0.07);
}
.theme-glassmorphism th, .theme-glass-deep th {
  background-color: rgba(255, 255, 255, 0.05);
  border-bottom-color: rgba(255,255,255,0.15);
  border-right-color: rgba(255,255,255,0.1);
}
body.night_mode .theme-glassmorphism th, body.night_mode .theme-glass-deep th {
  background-color: rgba(from var(--accent-1) r g b / 0.08);
  border-bottom-color: rgba(from var(--accent-1) r g b / 0.12);
  border-right-color: rgba(from var(--accent-1) r g b / 0.08);
}
.theme-glassmorphism td, .theme-glass-deep td {
  border-bottom-color: rgba(255,255,255,0.08);
  border-right-color: rgba(255,255,255,0.05);
}
body.night_mode .theme-glassmorphism td, body.night_mode .theme-glass-deep td {
  border-bottom-color: rgba(from var(--accent-1) r g b / 0.07);
  border-right-color: rgba(from var(--accent-1) r g b / 0.05);
}
.theme-glassmorphism tr:last-child td, .theme-glass-deep tr:last-child td { border-bottom: none;}
.theme-glassmorphism td:last-child, .theme-glassmorphism th:last-child,
.theme-glass-deep td:last-child, .theme-glass-deep th:last-child { border-right: none; }


.theme-neobrutalism table {
  border: 3px solid var(--text-primary);
  border-radius: 0;
  box-shadow: 6px 6px 0px var(--text-primary);
  background-color: hsl(var(--p-hue-bg), var(--p-bg-s), calc(var(--p-bg-l) + 3%));
}
body.night_mode .theme-neobrutalism table {
  background-color: hsl(var(--p-hue-bg), var(--p-bg-s), calc(var(--p-bg-l-dark) + 2%));
}
.theme-neobrutalism th, .theme-neobrutalism td {
  border-width: 0 0 3px 0;
  border-color: var(--text-primary);
}
.theme-neobrutalism td:not(:last-child), .theme-neobrutalism th:not(:last-child) {
  border-right-width: 3px;
  border-right-style: solid;
}
.theme-neobrutalism th {
  background-color: var(--accent-2);
  color: var(--c-grad-1-light);
}
body.night_mode .theme-neobrutalism th {
  color: var(--c-grad-1-dark);
}
.theme-neobrutalism tbody tr:nth-child(even) td {
  background-color: transparent;
}


.theme-claymorphism table {
  border-radius: 20px 8px 15px 5px / 10px 18px 8px 22px;
  box-shadow: inset -3px -3px 6px rgba(255,255,255,0.3), inset 3px 3px 8px rgba(0,0,0,0.07), 5px 5px 10px rgba(0,0,0,0.07);
  border: 1px solid hsl(var(--p-hue-bg), var(--p-bg-s), calc(var(--p-bg-l) - 5%));
  background-color: hsl(var(--p-hue-bg), var(--p-bg-s), calc(var(--p-bg-l) - 2%));
}
body.night_mode .theme-claymorphism table {
  box-shadow: inset -3px -3px 6px rgba(255,255,255,0.03), inset 3px 3px 8px rgba(0,0,0,0.2), 5px 5px 10px rgba(0,0,0,0.2);
  border-color: hsl(var(--p-hue-bg), var(--p-bg-s), calc(var(--p-bg-l-dark) + 5%));
  background-color: hsl(var(--p-hue-bg), var(--p-bg-s), calc(var(--p-bg-l-dark) + 2%));
}
.theme-claymorphism th {
   background-color: transparent;
   border-bottom-color: var(--accent-1);
}
.theme-claymorphism td { border-color: var(--divider); }
.theme-claymorphism tbody tr:nth-child(even) td { background-color: transparent; }


.theme-minimalist table {
  border: 2px solid var(--text-primary);
  border-radius: 2px;
  box-shadow: none;
  background-color: hsl(var(--p-hue-bg), var(--p-bg-s), var(--p-bg-l));
}
body.night_mode .theme-minimalist table {
  background-color: hsl(var(--p-hue-bg), var(--p-bg-s), var(--p-bg-l-dark));
}
.theme-minimalist th, .theme-minimalist td {
  border-color: var(--text-primary);
  padding: 0.5em 0.75em;
}
.theme-minimalist th {
  background-color: var(--text-primary);
  color: hsl(var(--p-hue-bg), var(--p-bg-s), var(--p-bg-l));
}
body.night_mode .theme-minimalist th {
  color: hsl(var(--p-hue-bg), var(--p-bg-s), var(--p-bg-l-dark));
}
.theme-minimalist tbody tr:nth-child(even) td {
  background-color: hsl(var(--p-hue-bg), var(--p-bg-s), calc(var(--p-bg-l) - 5%));
}
body.night_mode .theme-minimalist tbody tr:nth-child(even) td {
  background-color: hsl(var(--p-hue-bg), var(--p-bg-s), calc(var(--p-bg-l-dark) + 5%));
}


.theme-acrylic table {
  background-color: hsla(var(--p-hue-bg), var(--p-bg-s), var(--p-bg-l), 0.5);
  border: 1px solid hsla(var(--p-hue-bg), var(--p-bg-s), var(--p-bg-l), 0.15);
  backdrop-filter: blur(10px) saturate(100%); -webkit-backdrop-filter: blur(10px) saturate(100%);
  box-shadow: 0 2px 8px rgba(0,0,0,0.05);
}
body.night_mode .theme-acrylic table {
  background-color: hsla(var(--p-hue-bg), var(--p-bg-s), var(--p-bg-l-dark), 0.45);
  border-color: hsla(var(--p-hue-bg), var(--p-bg-s), var(--p-bg-l-dark), 0.25);
}
.theme-acrylic th {
  background-color: hsla(var(--p-hue-accent), var(--p-accent-s), var(--p-accent-l), 0.1);
}
.theme-acrylic td, .theme-acrylic th {
  border-color: hsla(var(--p-hue-bg), var(--p-bg-s), var(--p-bg-l), 0.1);
}
body.night_mode .theme-acrylic td, body.night_mode .theme-acrylic th {
  border-color: hsla(var(--p-hue-bg), var(--p-bg-s), calc(var(--p-bg-l-dark) + 10%), 0.15);
}


.theme-gelatin table {
  background: rgba(from var(--accent-1) r g b / 0.1);
  border: 1px solid rgba(from var(--accent-1) r g b / 0.15);
  border-radius: 1.5em;
  box-shadow: none;
}
.theme-gelatin th {
  background-color: rgba(from var(--accent-1) r g b / 0.15);
  border-bottom-color: rgba(from var(--accent-1) r g b / 0.2);
}
.theme-gelatin td, .theme-gelatin th {
  border-color: rgba(from var(--accent-1) r g b / 0.1);
}


.theme-quartz table {
  background: hsla(var(--p-hue-bg), 20%, 97%, 0.3);
  border: 1px solid hsla(var(--p-hue-bg), 20%, 95%, 0.5);
  box-shadow: inset 0 0 10px hsla(var(--p-hue-bg), 20%, 98%, 0.1);
  border-radius: 0.3em;
}
body.night_mode .theme-quartz table {
  background: hsla(var(--p-hue-bg), 10%, 12%, 0.3);
  border-color: hsla(var(--p-hue-bg), 10%, 15%, 0.5);
  box-shadow: inset 0 0 10px hsla(var(--p-hue-bg), 10%, 10%, 0.1);
}
.theme-quartz th {
  background-color: hsla(var(--p-hue-bg), 20%, 95%, 0.4);
}
body.night_mode .theme-quartz th {
  background-color: hsla(var(--p-hue-bg), 10%, 15%, 0.4);
}


.theme-obsidian table {
  background: linear-gradient(145deg, hsl(var(--p-hue-bg), 10%, 22%), hsl(var(--p-hue-bg), 10%, 12%));
  border: 1px solid hsl(var(--p-hue-bg), 10%, 30%);
  box-shadow: inset 0 1px 0px hsl(var(--p-hue-bg), 10%, 28%), 0 2px 5px rgba(0,0,0,0.2);
}
body.night_mode .theme-obsidian table {
  background: linear-gradient(145deg, hsl(var(--p-hue-bg), 10%, 15%), hsl(var(--p-hue-bg), 10%, 6%));
  border-color: hsl(var(--p-hue-bg), 10%, 20%);
}
.theme-obsidian th {
  background-color: hsl(var(--p-hue-bg), 10%, 25%);
  border-bottom-color: hsl(var(--p-hue-bg), 10%, 35%);
}
body.night_mode .theme-obsidian th {
  background-color: hsl(var(--p-hue-bg), 10%, 18%);
  border-bottom-color: hsl(var(--p-hue-bg), 10%, 28%);
}
.theme-obsidian td, .theme-obsidian th {
  border-color: hsl(var(--p-hue-bg), 10%, 25%);
}
body.night_mode .theme-obsidian td, body.night_mode .theme-obsidian th {
  border-color: hsl(var(--p-hue-bg), 10%, 20%);
}


.theme-holographic table {
  background: rgba(255,255,255,0.05);
  backdrop-filter: blur(5px); -webkit-backdrop-filter: blur(5px);
  border: 1px solid rgba(255,255,255,0.15);
  border-radius: 0.5em;
  box-shadow: none;
}
body.night_mode .theme-holographic table {
  background: rgba(255,255,255,0.03);
  border-color: rgba(255,255,255,0.1);
}
.theme-holographic th {
  background-color: rgba(255,255,255,0.07);
}
body.night_mode .theme-holographic th {
  background-color: rgba(255,255,255,0.05);
}

/*
================================================================================
V.   THEME-AWARE BUTTONS
================================================================================
*/
.button-general {
  outline: 0; border-radius: 0.75em; padding: 0.8em 1.2em;
  text-align: center; display: inline-block; font-size: 0.85rem; font-weight: 600;
  margin: 10px 5px; cursor: pointer; transition: all 0.2s ease-out; position: relative;
  background-color: hsla(var(--p-hue-accent), 20%, 50%, 0.1); color: var(--accent-1) !important;
  border: 1px solid hsla(var(--p-hue-accent), 20%, 50%, 0.2);
}
.button-general:hover { background-color: hsla(var(--p-hue-accent), 20%, 50%, 0.2); border-color: var(--accent-2); }
.button-general:active, .button-general.expanded-button { transform: translateY(1px); }

/* Specific Theme Button Overrides */
.theme-neobrutalism .button-general { background-color: var(--p-bold-fg); color: var(--text-primary) !important; border-radius: 0; border: 2px solid var(--text-primary); box-shadow: 3px 3px 0 var(--text-primary); }
.theme-claymorphism .button-general { background: hsl(var(--p-hue-bg), var(--p-bg-s), var(--p-bg-l)); box-shadow: -4px -4px 8px rgba(255,255,255,0.5), 4px 4px 8px rgba(0,0,0,0.1); border: none; }
body.night_mode .theme-claymorphism .button-general { background: hsl(var(--p-hue-bg), var(--p-bg-s), var(--p-bg-l-dark)); box-shadow: -4px -4px 8px rgba(255,255,255,0.05), 4px 4px 8px rgba(0,0,0,0.3); }
.theme-minimalist .button-general { border-radius: 2px; }
.theme-quartz .button-general { background: transparent; border: 1px solid var(--divider); }
.theme-obsidian .button-general { background: hsl(var(--p-hue-bg), 10%, 22%); border: 1px solid hsl(var(--p-hue-bg), 10%, 35%); }
body.night_mode .theme-obsidian .button-general { background: hsl(var(--p-hue-bg), 10%, 12%); border-color: hsl(var(--p-hue-bg), 10%, 25%); }
.theme-glassmorphism .button-general, .theme-glass-deep .button-general, .theme-holographic .button-general, .theme-liquid-glass .button-general { background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); color: var(--text-primary) !important; }
body.night_mode .theme-glassmorphism .button-general, body.night_mode .theme-glass-deep .button-general, body.night_mode .theme-holographic .button-general, body.night_mode .theme-liquid-glass .button-general { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); }
.theme-acrylic .button-general { background-color: hsla(var(--p-hue-accent), 20%, 50%, 0.1); border-color: hsla(var(--p-hue-accent), 20%, 50%, 0.2); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); }

/*
================================================================================
VI.  MISCELLANEOUS & ANKING STYLES
================================================================================
*/
#tags-container { display: none; }
.mobile .card { padding: 0.8em; }
.mobile .prettify-flashcard { padding: 1em; margin: 0; width: 100%; max-width: 100%; }
.prettify-field { margin: 1.5em; }
.mobile .prettify-field { margin: 1em; }

/* Image Styling */
img {
  border-radius: 0.5em; display: block; margin: 1em auto; max-width: 60% !important; height: auto; transition: transform 0.25s ease-in-out, box-shadow 0.2s ease-in-out;
}
.card:not(.night_mode) .prettify-flashcard img {
   box-shadow: 0 4px 10px hsla(var(--p-hue-bg), var(--p-text-s), calc(var(--p-text-l) - 15%), 0.12);
}
body.night_mode .prettify-flashcard img {
   box-shadow: 0 4px 12px hsla(0, 0%, 0%, 0.25);
}
.mobile img { max-width: 100% !important; height: auto !important; }
html:not(.mobile) .prettify-flashcard img:hover { transform: scale(1.3); cursor: zoom-in; }
html:not(.mobile) .card:not(.night_mode) .prettify-flashcard img:hover { box-shadow: 0 8px 20px hsla(var(--p-hue-bg), var(--p-text-s), calc(var(--p-text-l) - 25%), 0.2); }
html:not(.mobile) body.night_mode .prettify-flashcard img:hover { box-shadow: 0 8px 25px hsla(0, 0%, 0%, 0.35); }
html:not(.mobile) .prettify-flashcard img:active { transform: scale(1.05); cursor: zoom-out; }

/* Other styles */
.timer { display: none; }
.mobile #tags-container { display: none; }
.hints { font-size: .9rem; }
@keyframes card-bounce { 0%, 100% { transform: scale(1) translateZ(0); } 30% { transform: scale(1.03) translateZ(0); } 60% { transform: scale(0.98) translateZ(0); } }
.card-bounce-animation { animation: card-bounce 0.5s cubic-bezier(0.25, 0.1, 0.25, 1.5); }
#pic { opacity: 0.0; height: 40px; width: auto; border: 0; position: fixed; bottom: 15px; right: 15px; display: block; transition: opacity 0.3s ease; z-index: 1000; }
#pic:hover { opacity: 1; } .mobile #pic { display: none; }


/* === MODIFICATION: Readability Improvement (Text Shadow) === */
body.night_mode .prettify-flashcard,
body.night_mode .prettify-deck,
body.night_mode .cloze,
body.night_mode b,
body.night_mode i,
body.night_mode u {
  text-shadow: 0px 1px 4px rgba(0, 0, 0, 0.7);
}
/* === END MODIFICATION === */

/*
ANKIHUB_END
Text below this comment will not be modified by AnkiHub or AnKing add-ons.
Do not edit or remove this comment if you want to protect the content below.
*/
